<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cool Tunes</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">MEDIA PRODUCTION II</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="#">Custom Audio Player</a></li>
      <li><a href="video.html">Custom Video Player</a></li>
    </ul>
  </div>
</nav>

<div class="container">
  <h3>Custom HTML5 Audio Player</h3>
  <p>Use the buttons below to get some music playing!</p>
  <br>
  <div class="audio-player">
      <p style="color:#131313;font-size:1.8rem;"><strong>Arctic Monkeys - Arabella</strong> </p>
      <audio id="player" ontimeupdate="initProgressBar()" src="audio/Arabella.mp3" type="audio/mpeg" ></audio>
      <div>
	<button onclick="document.getElementById('player').play()">Play</button>
	<button onclick="document.getElementById('player').pause()">Pause</button>
	<button onclick="document.getElementById('player').volume+=0.1">Volume Up</button>
	<button onclick="document.getElementById('player').volume-=0.1">Volume Down</button>
    <span id="seekObjContainer">
    	<progress id="seekObj" value="0" max="1"></progress>
    </span>
          <br>
<small style="float: left; position: relative; left: 15px; color: #131313;" class="start-time"></small>
<small style="float: right; position: relative; right: 20px;color: #131313;" class="end-time"></small>
<br>
</div>
  </div>
</div>

<script>
function calculateTotalValue(length) {
  var minutes = Math.floor(length / 60),
    seconds_int = length - minutes * 60,
    seconds_str = seconds_int.toString(),
    seconds = seconds_str.substr(0, 2),
    time = minutes + ':' + seconds

  return time;
}

function calculateCurrentValue(currentTime) {
  var current_hour = parseInt(currentTime / 3600) % 24,
    current_minute = parseInt(currentTime / 60) % 60,
    current_seconds_long = currentTime % 60,
    current_seconds = current_seconds_long.toFixed(),
    current_time = (current_minute < 10 ? "0" + current_minute : current_minute) + ":" + (current_seconds < 10 ? "0" + current_seconds : current_seconds);

  return current_time;
}

function initProgressBar() {
  var player = document.getElementById('player');
  var length = player.duration
  var current_time = player.currentTime;

  // calculate total length of value
  var totalLength = calculateTotalValue(length)
  jQuery(".end-time").html(totalLength);

  // calculate current value time
  var currentTime = calculateCurrentValue(current_time);
  jQuery(".start-time").html(currentTime);

  var progressbar = document.getElementById('seekObj');
  progressbar.value = (player.currentTime / player.duration);
  progressbar.addEventListener("click", seek);

  if (player.currentTime == player.duration) {
    $('#play-btn').removeClass('pause');
  }

  function seek(evt) {
    var percent = evt.offsetX / this.offsetWidth;
    player.currentTime = percent * player.duration;
    progressbar.value = percent / 100;
  }
};

</script>

</body>
</html>
